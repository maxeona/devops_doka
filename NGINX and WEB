Термины в настройках Nginx
##################################################################################
Директивы - конкретные опции конфигурации
{name_options} values;
Контексты - разделы в файле конфигурации  (аля зона видимости)
(events, http, server, location, upstream)
* Контекст наследуется от родительского контекста

https://blog.sefdar.ru/nginx-%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F-proxy_redirect-%D0%B8-redirect/
Наследование
 http
  |
server
  |
location

!!!Наследование не всегда идет прямо. Всё зависит от типа директивы, которая наследуется!!!

1)Стандартные директивы - нужно определять один раз, наследуется всеми 
2)Директивы массивы - можно переопределять несколько раз, с разными значениями
3)Директивы действия -  выполняют действия при нажатии
4)try_files - попытка обработать запрос по логике(директива не наследуется)

Если есть несколько серверов, соответствующих IP-адресу и порту запроса, NGINX Plus проверяет Hostполе заголовка запроса на соответствие директивам server_name в serverблоках. 

*******************************
Приоритет местоположения NGINX
Чтобы найти местоположение, которое лучше всего соответствует URI, NGINX Plus сначала сравнивает URI с местоположениями со строкой префикса. Затем он ищет местоположения с регулярным выражением.

Более высокий приоритет отдается регулярным выражениям, если не ^~используется модификатор. Среди строк префикса NGINX Plus выбирает наиболее конкретную (то есть самую длинную и полную строку). Точная логика выбора места для обработки запроса приведена ниже:

Проверьте URI на соответствие всем строкам префиксов.
Модификатор =(знак равенства) определяет точное совпадение URI и строки префикса. Если точное совпадение найдено, поиск прекращается.
Если ^~модификатор (тильда-вставка) добавляет самую длинную совпадающую строку префикса, регулярные выражения не проверяются.
Сохраните самую длинную совпадающую строку префикса.
Проверьте URI на соответствие регулярным выражениям.
Остановите обработку, когда будет найдено первое совпадающее регулярное выражение, и используйте соответствующее расположение.
Если ни одно регулярное выражение не соответствует, используйте местоположение, соответствующее сохраненной строке префикса.
